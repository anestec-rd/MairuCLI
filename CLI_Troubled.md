💀 CLI特化！エンジニアの恐怖コマンドあるある
1. 破壊的削除コマンド系
rm -rf の悪夢
sudo rm -rf /：システム全体を削除してしまう最恐コマンド
rm -rf * の誤爆：間違ったディレクトリで実行して重要ファイルを全消去
変数が空の罠：rm -rf $DIR/* で$DIRが空だとrm -rf /*になる恐怖
タイプミス地獄：rm -rf /home/user/tmp のつもりが rm -rf /home/user /tmp になる（スペース一つで別れる）
取り返しがつかない：ゴミ箱もなく、バックアップなければ完全消失
参考：Linuxでrm -rf *で間違えて全消去を防ぐ方法
dd コマンドの恐怖（Data Destroyer）
dd if=/dev/zero of=/dev/sda：間違ったドライブを指定してディスク全体を破壊
入力と出力を逆にする：ifとofを逆に書いてデータが消失
確認なしで即実行：警告メッセージも出ずに淡々と破壊が進む
2. 権限設定ミス系
chmod 777 の安易な使用
セキュリティ全開放：「Permission denied」にイライラして脳死でchmod 777
本番環境で777：誰でも読み書き実行可能になり、セキュリティ崩壊
再帰的に全開放：chmod -R 777 /で全システムの権限が崩壊
参考：Linuxのchmod 777とは？意味と危険性
chown の誤爆
sudo chown -R root: /：ルートディレクトリ全体の所有者を変更してシステム崩壊
間違った所有者設定：本来のユーザーがファイルにアクセスできなくなる
sudoが使えなくなる：/usr/bin/sudoの所有者を変更してしまい、復旧不可能に
参考：コマンドを打ち間違えてサーバーを1つ葬り去った話
3. sudo の誤用・乱用
何でもかんでも sudo
sudo cd /root：cdにsudoをつけても意味がない（よくある勘違い）
sudoの習慣化：考えずにsudoをつけてしまい、重大なミスに気づかない
rootで常用：sudo suでrootになったまま作業して誤操作連発
sudo!! の罠
間違ったコマンドをsudo実行：直前のコマンドが間違っていたのにsudo !!で実行
履歴から危険なコマンド実行：うっかり履歴の危険コマンドをsudo付きで実行
参考：手グセで使ってはいけない強力コマンド＆オプション
4. パイプ・リダイレクトの事故
> /dev/null の誤爆
cat important.log > /dev/null：重要なログをブラックホールに送信
>と>>の取り違え：上書きするつもりが追記、または逆
パイプの破壊的連鎖
cat /etc/passwd | rm -rf：パイプで危険なコマンドを連鎖実行
ファイル上書き：echo "test" > /etc/hosts で重要な設定ファイルを破壊
5. 環境・接続先の取り違え
本番と開発の混同
本番サーバーでテストコマンド実行：プロンプトを見間違えて本番で破壊的操作
tmuxの別ペインミス：開いているペインを間違えて別サーバーで実行
SSHのタブ間違い：複数のSSHタブで接続先を見誤る
PSプロンプトの色を分ける重要性：本番=赤、開発=緑などの色分けをしていないと事故る
6. Gitコマンドの恐怖
強制プッシュ・リセット
git push -f origin master：他人のコミットを消し去る
git reset --hard HEAD~10：10個分のコミットが消失
git clean -fdx：追跡していないファイルを全削除（復元不可）
間違ったブランチ操作
masterに直接commit & push：保護されていないmasterに事故プッシュ
間違ったブランチでrebase：意図しないブランチで履歴改変
7. データベースコマンドの悲劇
SQL DROP系
DROP DATABASE production;：本番データベースを削除
TRUNCATE TABLE users;：全ユーザーデータを消去（ROLLBACKできない）
WHERE句なしのDELETE：DELETE FROM orders; で全注文データ消失
接続先ミス
本番DBに接続したつもりがテスト用SQL実行：またはその逆
MySQLとPostgreSQLの構文違い：慣れている方のコマンドで別DBを操作して事故
8. ネットワークコマンドの事故
iptables の誤設定
iptables -F：全ルールをフラッシュしてSSH接続が切れる（リモートサーバーで実施すると二度と入れない）
自分をロックアウト：SSH接続中にファイアウォール設定を変更して締め出される
ifconfig / ip の誤操作
ネットワークインターフェースをダウン：ifdown eth0 でリモートサーバーから切断
9. プロセス・システム管理
kill の誤爆
kill -9 -1：全プロセスをkillしてシステムダウン
PIDの取り違え：重要なプロセスを間違えてkill
shutdown / reboot の誤実行
本番サーバーでsudo reboot：ピーク時間に再起動してサービス停止
shutdown now の即座実行：作業中のユーザー全員を強制切断
10. エイリアス・履歴の罠
危険なエイリアス設定
alias rm='rm -rf'：削除が常に強制再帰削除になる
alias cd='cd .. && rm -rf *'：意図しない破壊的エイリアス（いたずら）
コマンド履歴からの誤実行
Ctrl+R で検索したら危険コマンド：履歴から意図しない危険なコマンドを実行
履歴の事故再実行：!! や !$ で予期しないコマンドが発火
11. タイプミス・スペルミス
よくあるタイプミス
cd /usr/lcoal：存在しないディレクトリへの移動（そのまま次のコマンド実行で事故）
rm -rf ./tmp のつもりが rm -rf . /tmp：カレントディレクトリを削除
chmod 644 のつもりが chmod 664：意図しない権限設定
オプションの順序ミス
tar -cvf /backup dir/ のつもりが tar -cvf dir/ /backup：引数の順序を間違えて既存ファイル破壊
12. Ctrl + キーの誤爆
Ctrl+C / Ctrl+Z の誤操作
重要な長時間処理を誤ってCtrl+C：数時間の処理が水の泡
Ctrl+Z で停止したまま放置：バックグラウンドジョブが溜まってリソース圧迫
Ctrl+S / Ctrl+Q
Ctrl+S でターミナル凍結：画面が固まったと勘違いして強制終了
Ctrl+Q を知らない：ターミナルが反応しないままパニック
13. 本番機での実験・テスト
「ちょっと試すだけ」の罠
本番環境で新しいコマンドを試す：予期しない動作で障害発生
「動くかな？」で危険コマンド実行：確認せずに実行して取り返しのつかない事態
ログの見落とし
エラーを無視して続行：2>/dev/null でエラーを捨てて重大な問題を見逃す
🛡️ CLI恐怖を防ぐための対策
基本の防衛策
本番環境はプロンプトを赤く：視覚的に警告
危険コマンドは確認オプション必須：rm -i、mv -i、cp -i
エイリアス設定：alias rm='rm -i' で常に確認
バックアップは必須：実行前に必ずバックアップ
コマンド実行前にpwd確認：今どこにいるか確認する癖をつける
tmuxやscreenでセッション保護：誤操作でSSH切断されても作業継続可能
sudoは最小限に：本当に必要な時だけ使用
履歴確認の習慣：実行前にhistoryで直前のコマンドを確認
上級者向け対策
safermツールの使用：rmの安全版コマンド
Git管理：設定ファイルはGit管理してロールバック可能に
dry-runオプション活用：rsync --dry-run など
本番環境へのアクセスは踏み台経由：直接接続させない
監査ログの記録：全コマンド履歴を記録
参考：手グセで使ってはいけない強力コマンド＆オプション
参考：Linux初心者が99%やらかすミス7選
CLIの世界は「一度Enterを押したら取り返しがつかない」という緊張感との戦いです。特に本番環境では、たった一つのコマンドミスが会社全体に影響を与えることも。だからこそ、慎重さと確認の習慣が何よりも重要なのです！